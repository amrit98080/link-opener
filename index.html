<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opening App...</title>
</head>
<body style="background: white;">
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const ytId = urlParams.get('v');   // For Videos
        const ytChan = urlParams.get('c'); // For Channels (Handle or Name)
        const igUser = urlParams.get('ig'); // For Instagram

        const isAndroid = /Android/i.test(navigator.userAgent);
        const isiOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);

        if (ytId) {
            // YOUTUBE VIDEO
            const webUrl = "https://www.youtube.com/watch?v=" + ytId;
            if (isAndroid) {
                window.location.href = "intent://www.youtube.com/watch?v=" + ytId + "#Intent;scheme=https;package=com.google.android.youtube;end;";
            } else if (isiOS) {
                window.location.href = "youtube://www.youtube.com/watch?v=" + ytId;
            }
            setTimeout(() => { window.location.href = webUrl; }, 150);

        } else if (ytChan) {
            // YOUTUBE CHANNEL
            const webUrl = "https://www.youtube.com/" + ytChan;
            if (isAndroid) {
                // Forces the YouTube app to open a specific channel handle/name
                window.location.href = "intent://www.youtube.com/" + ytChan + "#Intent;scheme=https;package=com.google.android.youtube;end;";
            } else if (isiOS) {
                window.location.href = "youtube://www.youtube.com/" + ytChan;
            }
            setTimeout(() => { window.location.href = webUrl; }, 150);

        } else if (igUser) {
            // INSTAGRAM PROFILE
            const webUrl = "https://www.instagram.com/" + igUser + "/";
            if (isAndroid) {
                window.location.href = "intent://www.instagram.com/_u/" + igUser + "/#Intent;scheme=https;package=com.instagram.android;end;";
            } else if (isiOS) {
                window.location.href = "instagram://user?username=" + igUser;
            }
            setTimeout(() => { window.location.href = webUrl; }, 150);

        } else {
            // DEFAULT (If no ID found)
            window.location.href = "https://www.youtube.com/";
        }
    </script>
</body>
</html>
